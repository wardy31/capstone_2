{"ast":null,"code":"import moment from \"moment\";\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"closeContact/getPatient\");\n  },\n  filters: {\n    dateFormat(val) {\n      return moment(val).format(\"MMM. DD, YYYY\").toString();\n    }\n  },\n  computed: {\n    ...mapState({\n      contacts: state => state.closeContact.all.data,\n      allContacts: state => state.closeContact.all.allContacts,\n      page: state => state.closeContact.all.page,\n      updateLoading: state => state.closeContact.update.loading,\n      durationDialog: state => state.closeContact.update.dialog,\n      deleteLoading: state => state.closeContact.delete.loading\n    })\n  },\n  data() {\n    return {\n      deleteDialog: false,\n      deleteId: false,\n      deleteSnackBar: false,\n      page_number: 1,\n      docState: \"saved\",\n      changeBtn: true,\n      title: \"\",\n      duration: \"\",\n      updateId: null,\n      inputSearch: \"\"\n    };\n  },\n  methods: {\n    switchs() {\n      this.changeBtn = !this.changeBtn;\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id;\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.deleteDialog = false;\n      console.log(\"closed\");\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch(\"closeContact/updatePatientDuration\", {\n        id: this.updateId,\n        duration: this.duration\n      });\n    },\n    pageSwitch(data) {\n      this.$store.dispatch(\"closeContact/getPatient\", data);\n    },\n    handleSearch() {\n      this.$store.dispatch(\"closeContact/searchPatient\", this.inputSearch);\n    },\n    handleDeleteDialog(data) {\n      this.deleteId = data.id;\n      this.deleteDialog = true;\n    },\n    async handleSubmitDelete() {\n      const res = await this.$store.dispatch(\"closeContact/deletePatient\", {\n        deleteId: this.deleteId\n      });\n      if (res) {\n        this.deleteSnackBar = true;\n        this.deleteId = null;\n        this.deleteDialog = false;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AA6QA;AACA;AACA;EACAA;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACAD;IACA;IACAE;MACA;QACAC;QACAT;MACA;IACA;IACAU;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;MACA;QACAlB;MACA;MAEA;QACA;QACA;QACA;MACA;IACA;EACA;AACA","names":["mounted","filters","dateFormat","computed","contacts","allContacts","page","updateLoading","durationDialog","deleteLoading","data","deleteDialog","deleteId","deleteSnackBar","page_number","docState","changeBtn","title","duration","updateId","inputSearch","methods","switchs","handleDuration","console","closeDialog","handleDurationSubmit","id","pageSwitch","handleSearch","handleDeleteDialog"],"sourceRoot":"src/views/admin/ManageContact","sources":["ContactUser.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <div class=\"ma-12\">\r\n      <h2 class=\"primary--text font-weight-bold mt-12 mb-1\">\r\n        Manage Close Contacts {{ changeBtn ? \"\" : \"/ View\" }}\r\n      </h2>\r\n      <h5 class=\"secondary--text\">\r\n        Managing who has been in contact of the user\r\n      </h5>\r\n      <v-card class=\"rounded-lg mt-8\" width=\"290\">\r\n        <v-card-title class=\"font-weight-bold primary--text\"\r\n          >Total Active Patient</v-card-title\r\n        >\r\n        <v-card-text>\r\n          <v-row>\r\n            <v-col>\r\n              <div class=\"d-flex align-center justify-center\">\r\n                <h1 class=\"primary--text mr-4\">{{ allContacts }}</h1>\r\n                <v-icon size=\"30\">person</v-icon>\r\n              </div>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card-text>\r\n      </v-card>\r\n      <div class=\"adj mt-4 pt-6 d-flex mb-n3\">\r\n        <v-text-field\r\n          class=\"mr-2\"\r\n          label=\"Search here\"\r\n          solo\r\n          outlined\r\n          dense\r\n          v-model=\"inputSearch\"\r\n        ></v-text-field>\r\n        <v-btn color=\"primary\" class=\"py-5\" @click=\"handleSearch\"\r\n          ><v-icon>search</v-icon></v-btn\r\n        >\r\n      </div>\r\n      <v-simple-table class=\"rounded-lg elevation-6\">\r\n        <thead>\r\n          <tr class=\"text-center\">\r\n            <th class=\"text-left black--text\">\r\n              <h3>Name</h3>\r\n            </th>\r\n\r\n            <!-- <th class=\"text-left black--text \">\r\n              <h3>Role</h3>\r\n            </th> -->\r\n\r\n            <th class=\"text-left black--text\">\r\n              <h3>Active Disease</h3>\r\n            </th>\r\n\r\n            <th class=\"text-left black--text text-center\">\r\n              <h3>Days left</h3>\r\n            </th>\r\n\r\n            <th class=\"text-left black--text text-center\">\r\n              <h3>No. of Contacts</h3>\r\n            </th>\r\n\r\n            <th class=\"text-left black--text text-center\">\r\n              <h3>Date Created</h3>\r\n            </th>\r\n\r\n            <th class=\"text-left black--text text-center\">\r\n              <h3>Action</h3>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          <tr\r\n            class=\"text-center text-capitalize\"\r\n            v-for=\"contact in contacts\"\r\n            :key=\"contact.id\"\r\n          >\r\n            <td class=\"text-left primary--text font-weight-bold\">\r\n              {{\r\n                `${contact.user_account.first_name} ${contact.user_account.middle_name} ${contact.user_account.last_name} `\r\n              }}\r\n              <div class=\"secondary--text font-weight-thin\">\r\n                {{ contact.user_account.classification.name }}\r\n              </div>\r\n            </td>\r\n            <!-- <td class=\"text-left\">{{ contact.user_account.classification.name }}</td> -->\r\n            <td class=\"text-left\">{{ contact.disease.name }}</td>\r\n            <td>\r\n              {{ contact.days_left }}\r\n              {{ (contact.days_left == 1 || contact.days_left == 0) ? \"day\" : \"days\" }} left\r\n            </td>\r\n            <td>\r\n              {{\r\n                contact.contacts.length\r\n                  ? contact.contacts.length\r\n                  : \"No Contacts\"\r\n              }}\r\n            </td>\r\n            <td>\r\n              {{ contact.created_at | dateFormat }}\r\n            </td>\r\n            <td>\r\n              <v-menu\r\n                offset-y\r\n                bottom\r\n                transition=\"slide-y-transition\"\r\n                rounded=\"lg\"\r\n              >\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                  <v-btn\r\n                    color=\"primary\"\r\n                    dark\r\n                    v-bind=\"attrs\"\r\n                    v-on=\"on\"\r\n                    icon\r\n                    large\r\n                  >\r\n                    <v-icon>menu_open</v-icon>\r\n                  </v-btn>\r\n                </template>\r\n                <v-list>\r\n                  <v-list-item\r\n                    :to=\"`/admin/checkprofile/${contact.user_account.id}`\"\r\n                  >\r\n                    <v-list-item-icon class=\"mr-4\"\r\n                      ><v-icon color=\"primary\"\r\n                        >account_circle</v-icon\r\n                      ></v-list-item-icon\r\n                    >\r\n                    <v-list-item-title class=\"font-weight-bold\"\r\n                      ><h5>Check Profile</h5></v-list-item-title\r\n                    >\r\n                  </v-list-item>\r\n                  <v-divider></v-divider>\r\n                  <v-list-item @click=\"handleDuration(contact)\">\r\n                    <v-list-item-icon class=\"mr-4\"\r\n                      ><v-icon color=\"primary\">timer</v-icon></v-list-item-icon\r\n                    >\r\n                    <v-list-item-title class=\"font-weight-bold\"\r\n                      ><h5>Edit Duration</h5></v-list-item-title\r\n                    >\r\n                  </v-list-item>\r\n                  <v-divider></v-divider>\r\n                  <v-list-item\r\n                    :to=\"`/admin/manage/viewtrace/${contact.user_account.id}/${contact.id}`\"\r\n                  >\r\n                    <v-list-item-icon class=\"mr-4\"\r\n                      ><v-icon color=\"primary\"\r\n                        >reduce_capacity</v-icon\r\n                      ></v-list-item-icon\r\n                    >\r\n                    <v-list-item-title class=\"font-weight-bold\"\r\n                      ><h5>View Contacts</h5></v-list-item-title\r\n                    >\r\n                  </v-list-item>\r\n                  <v-divider></v-divider>\r\n                  <v-list-item @click=\"handleDeleteDialog(contact)\">\r\n                    <v-list-item-icon class=\"mr-4\"\r\n                      ><v-icon color=\"error\">delete</v-icon></v-list-item-icon\r\n                    >\r\n                    <v-list-item-title class=\"font-weight-bold\"\r\n                      ><h5>Delete Patient</h5></v-list-item-title\r\n                    >\r\n                  </v-list-item>\r\n                </v-list>\r\n              </v-menu>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-simple-table>\r\n\r\n      <!-- Edit Duration -->\r\n      <v-dialog\r\n        v-model=\"durationDialog\"\r\n        width=\"auto\"\r\n        @click:outside=\"closeDialog\"\r\n      >\r\n        <v-card>\r\n          <v-card-title class=\"primary accent--text font-weight-bold\"\r\n            >Edit Duration</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-8\">\r\n            <v-text-field\r\n              name=\"duration\"\r\n              label=\" Set Duration (Day)\"\r\n              v-model=\"duration\"\r\n              id=\"id\"\r\n              outlined\r\n              filled\r\n            ></v-text-field>\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n              color=\"black\"\r\n              class=\"text-capitalize\"\r\n              text\r\n              plain\r\n              @click=\"closeDialog\"\r\n              >cancel</v-btn\r\n            >\r\n            <v-btn\r\n              color=\"primary\"\r\n              class=\"text-capitalize\"\r\n              :loading=\"updateLoading\"\r\n              @click=\"handleDurationSubmit\"\r\n              >Update</v-btn\r\n            >\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n\r\n      <!-- Delete -->\r\n      <v-dialog\r\n        v-model=\"deleteDialog\"\r\n        width=\"auto\"\r\n        @click:outside=\"closeDialog\"\r\n      >\r\n        <v-card>\r\n          <v-card-title class=\"primary accent--text font-weight-bold\"\r\n            >Delete Patient</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-8\">\r\n            <div>\r\n              <h3>Are you sure to delete this user ?</h3>\r\n            </div>\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n              color=\"black\"\r\n              class=\"text-capitalize\"\r\n              text\r\n              plain\r\n              @click=\"closeDialog\"\r\n              >cancel</v-btn\r\n            >\r\n            <v-btn\r\n              color=\"error\"\r\n              class=\"text-capitalize\"\r\n              :loading=\"deleteLoading\"\r\n              @click=\"handleSubmitDelete\"\r\n              >delete</v-btn\r\n            >\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n\r\n      <v-snackbar\r\n        v-model=\"deleteSnackBar\"\r\n        bottom\r\n        right\r\n        color=\"error\"\r\n      >\r\n        <v-icon>check</v-icon>\r\n        Patient Deleted Successfully\r\n      </v-snackbar>\r\n      <v-pagination\r\n        v-model=\"page_number\"\r\n        :length=\"page\"\r\n        class=\"float-right mt-4\"\r\n        @input=\"pageSwitch\"\r\n      ></v-pagination>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  mounted() {\r\n    this.$store.dispatch(\"closeContact/getPatient\");\r\n  },\r\n  filters: {\r\n    dateFormat(val) {\r\n      return moment(val).format(\"MMM. DD, YYYY\").toString();\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      contacts: (state) => state.closeContact.all.data,\r\n      allContacts: (state) => state.closeContact.all.allContacts,\r\n      page: (state) => state.closeContact.all.page,\r\n      updateLoading: (state) => state.closeContact.update.loading,\r\n      durationDialog: (state) => state.closeContact.update.dialog,\r\n      deleteLoading: (state) => state.closeContact.delete.loading,\r\n    }),\r\n  },\r\n  data() {\r\n    return {\r\n      deleteDialog: false,\r\n      deleteId: false,\r\n      deleteSnackBar: false,\r\n      page_number: 1,\r\n      docState: \"saved\",\r\n      changeBtn: true,\r\n      title: \"\",\r\n      duration: \"\",\r\n      updateId: null,\r\n      inputSearch: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    switchs() {\r\n      this.changeBtn = !this.changeBtn;\r\n    },\r\n    handleDuration(data) {\r\n      console.log(data);\r\n      this.duration = data.days_left;\r\n      this.updateId = data.id;\r\n      this.$store.state.closeContact.update.dialog = true;\r\n    },\r\n    closeDialog() {\r\n      this.$store.state.closeContact.update.dialog = false;\r\n      this.deleteDialog = false;\r\n      console.log(\"closed\");\r\n    },\r\n    handleDurationSubmit() {\r\n      this.$store.dispatch(\"closeContact/updatePatientDuration\", {\r\n        id: this.updateId,\r\n        duration: this.duration,\r\n      });\r\n    },\r\n    pageSwitch(data) {\r\n      this.$store.dispatch(\"closeContact/getPatient\", data);\r\n    },\r\n    handleSearch() {\r\n      this.$store.dispatch(\"closeContact/searchPatient\", this.inputSearch);\r\n    },\r\n    handleDeleteDialog(data) {\r\n      this.deleteId = data.id;\r\n      this.deleteDialog = true;\r\n    },\r\n    async handleSubmitDelete() {\r\n      const res = await this.$store.dispatch(\"closeContact/deletePatient\", {\r\n        deleteId: this.deleteId,\r\n      });\r\n\r\n      if (res) {\r\n        this.deleteSnackBar = true;\r\n        this.deleteId = null;\r\n        this.deleteDialog = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.bg {\r\n  background-color: #f8f0f0;\r\n}\r\n.adj {\r\n  width: 280px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}