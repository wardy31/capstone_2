{"ast":null,"code":"import axios from \"@/config/axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  namespaced: true,\n  state: () => ({\n    all: {\n      data: [],\n      loading: false,\n      error: false,\n      message: \"\"\n    },\n    matching: {\n      data: null,\n      loading: false,\n      error: false,\n      success: false,\n      message: \"\",\n      playing: true\n    }\n  }),\n  mutations: {\n    setData(state, payload) {\n      state[payload.type].data = payload.data;\n    },\n    setLoading(state, payload) {\n      state[payload.type].loading = payload.loading;\n    },\n    setPlaying(state, payload) {\n      state.matching.playing = payload;\n    }\n  },\n  actions: {\n    async getVisitedUser({\n      commit\n    }, payload) {\n      try {\n        const {\n          data\n        } = await axios.post(\"station/get-visitor\", {\n          location_id: payload\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        console.log(\"visited user\", data);\n        await commit(\"setData\", {\n          type: \"all\",\n          data: data.data\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async matchUser({\n      commit,\n      dispatch\n    }, payload) {\n      console.log('paylaod', payload);\n      localStorage.setItem('location', payload.location_id);\n      commit(\"setPlaying\", false);\n      try {\n        const {\n          data\n        } = await axios.post(\"station/match\", {\n          location_id: localStorage.getItem(\"location\"),\n          user_id: payload.user_id\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        await commit(\"setPlaying\", true);\n        console.log('paylaod inner', payload);\n        await Swal.fire({\n          title: \"Success\",\n          text: `Successfully Logged In`,\n          icon: \"success\",\n          confirmButtonText: \"close\",\n          timer: 2000\n        });\n        await commit(\"setData\", {\n          type: \"matching\",\n          data: data.data\n        });\n        await dispatch(\"getVisitedUser\", payload.location_id);\n        console.log(\"matching Data\", data.data);\n      } catch (error) {\n        console.log(error);\n        commit(\"setPlaying\", true);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Swal","namespaced","state","all","data","loading","error","message","matching","success","playing","mutations","setData","payload","type","setLoading","setPlaying","actions","getVisitedUser","commit","post","location_id","headers","Authorization","localStorage","getItem","console","log","matchUser","dispatch","setItem","user_id","fire","title","text","icon","confirmButtonText","timer"],"sources":["/home/wardy/Desktop/capstone/fe/src/store/modules/match.js"],"sourcesContent":["import axios from \"@/config/axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  namespaced: true,\n  state: () => ({\n    all: {\n      data: [],\n      loading: false,\n      error: false,\n      message: \"\",\n    },\n    matching: {\n      data: null,\n      loading: false,\n      error: false,\n      success: false,\n      message: \"\",\n      playing: true,\n    },\n  }),\n  mutations: {\n    setData(state, payload) {\n      state[payload.type].data = payload.data;\n    },\n    setLoading(state, payload) {\n      state[payload.type].loading = payload.loading;\n    },\n    setPlaying(state, payload) {\n      state.matching.playing = payload;\n    },\n  },\n  actions: {\n    async getVisitedUser({ commit }, payload) {\n      try {\n        const { data } = await axios.post(\n          \"station/get-visitor\",\n          { location_id: payload },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        );\n        console.log(\"visited user\", data);\n        await commit(\"setData\", { type: \"all\", data: data.data });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async matchUser({ commit, dispatch }, payload) {\n    console.log('paylaod', payload);\n    localStorage.setItem('location', payload.location_id)\n      commit(\"setPlaying\", false);\n      try {\n        const { data } = await axios.post(\"station/match\",{location_id:localStorage.getItem(\"location\"),user_id:payload.user_id}, {\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n        });\n        await commit(\"setPlaying\", true);\n        console.log('paylaod inner', payload);\n        await Swal.fire({\n          title: \"Success\",\n          text: `Successfully Logged In`,\n          icon: \"success\",\n          confirmButtonText: \"close\",\n          timer: 2000,\n        });\n        await commit(\"setData\", { type: \"matching\", data: data.data });\n        await dispatch(\"getVisitedUser\", payload.location_id);\n        console.log(\"matching Data\", data.data);\n      } catch (error) {\n        console.log(error);\n        commit(\"setPlaying\", true);\n      }\n    },\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}