{"ast":null,"code":"import { createBrowserEnv } from './createBrowserEnv';\nimport { createFileSystem } from './createFileSystem';\nimport { createNodejsEnv } from './createNodejsEnv';\nimport { isBrowser } from './isBrowser';\nimport { isNodejs } from './isNodejs';\nvar environment;\nfunction getEnv() {\n  if (!environment) {\n    throw new Error('getEnv - environment is not defined, check isNodejs() and isBrowser()');\n  }\n  return environment;\n}\nfunction setEnv(env) {\n  environment = env;\n}\nfunction initialize() {\n  // check for isBrowser() first to prevent electron renderer process\n  // to be initialized with wrong environment due to isNodejs() returning true\n  if (isBrowser()) {\n    setEnv(createBrowserEnv());\n  }\n  if (isNodejs()) {\n    setEnv(createNodejsEnv());\n  }\n}\nfunction monkeyPatch(env) {\n  if (!environment) {\n    initialize();\n  }\n  if (!environment) {\n    throw new Error('monkeyPatch - environment is not defined, check isNodejs() and isBrowser()');\n  }\n  var _a = env.Canvas,\n    Canvas = _a === void 0 ? environment.Canvas : _a,\n    _b = env.Image,\n    Image = _b === void 0 ? environment.Image : _b;\n  environment.Canvas = Canvas;\n  environment.Image = Image;\n  environment.createCanvasElement = env.createCanvasElement || function () {\n    return new Canvas();\n  };\n  environment.createImageElement = env.createImageElement || function () {\n    return new Image();\n  };\n  environment.ImageData = env.ImageData || environment.ImageData;\n  environment.Video = env.Video || environment.Video;\n  environment.fetch = env.fetch || environment.fetch;\n  environment.readFile = env.readFile || environment.readFile;\n}\nexport var env = {\n  getEnv: getEnv,\n  setEnv: setEnv,\n  initialize: initialize,\n  createBrowserEnv: createBrowserEnv,\n  createFileSystem: createFileSystem,\n  createNodejsEnv: createNodejsEnv,\n  monkeyPatch: monkeyPatch,\n  isBrowser: isBrowser,\n  isNodejs: isNodejs\n};\ninitialize();","map":{"version":3,"mappings":"AAAA,SAASA,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,QAAQ,QAAQ,YAAY;AAGrC,IAAIC,WAA+B;AAEnC,SAASC,MAAM;EACb,IAAI,CAACD,WAAW,EAAE;IAChB,MAAM,IAAIE,KAAK,CAAC,uEAAuE,CAAC;;EAE1F,OAAOF,WAAW;AACpB;AAEA,SAASG,MAAM,CAACC,GAAgB;EAC9BJ,WAAW,GAAGI,GAAG;AACnB;AAEA,SAASC,UAAU;EACjB;EACA;EACA,IAAIP,SAAS,EAAE,EAAE;IACfK,MAAM,CAACR,gBAAgB,EAAE,CAAC;;EAE5B,IAAII,QAAQ,EAAE,EAAE;IACdI,MAAM,CAACN,eAAe,EAAE,CAAC;;AAE7B;AAEA,SAASS,WAAW,CAACF,GAAyB;EAC5C,IAAI,CAACJ,WAAW,EAAE;IAChBK,UAAU,EAAE;;EAGd,IAAI,CAACL,WAAW,EAAE;IAChB,MAAM,IAAIE,KAAK,CAAC,4EAA4E,CAAC;;EAGvF,mBAA2B;IAA3BK,gDAA2B;IAAEC,cAAyB;IAAzBC,8CAAyB;EAC9DT,WAAW,CAACO,MAAM,GAAGA,MAAM;EAC3BP,WAAW,CAACS,KAAK,GAAGA,KAAK;EACzBT,WAAW,CAACU,mBAAmB,GAAGN,GAAG,CAACM,mBAAmB,IAAK;IAAM,WAAIH,MAAM,EAAE;EAAZ,CAAa;EACjFP,WAAW,CAACW,kBAAkB,GAAGP,GAAG,CAACO,kBAAkB,IAAK;IAAM,WAAIF,KAAK,EAAE;EAAX,CAAY;EAE9ET,WAAW,CAACY,SAAS,GAAGR,GAAG,CAACQ,SAAS,IAAIZ,WAAW,CAACY,SAAS;EAC9DZ,WAAW,CAACa,KAAK,GAAGT,GAAG,CAACS,KAAK,IAAIb,WAAW,CAACa,KAAK;EAClDb,WAAW,CAACc,KAAK,GAAGV,GAAG,CAACU,KAAK,IAAId,WAAW,CAACc,KAAK;EAClDd,WAAW,CAACe,QAAQ,GAAGX,GAAG,CAACW,QAAQ,IAAIf,WAAW,CAACe,QAAQ;AAC7D;AAEA,OAAO,IAAMX,GAAG,GAAG;EACjBH,MAAM;EACNE,MAAM;EACNE,UAAU;EACVV,gBAAgB;EAChBC,gBAAgB;EAChBC,eAAe;EACfS,WAAW;EACXR,SAAS;EACTC,QAAQ;CACT;AAEDM,UAAU,EAAE","names":["createBrowserEnv","createFileSystem","createNodejsEnv","isBrowser","isNodejs","environment","getEnv","Error","setEnv","env","initialize","monkeyPatch","Canvas","_b","Image","createCanvasElement","createImageElement","ImageData","Video","fetch","readFile"],"sourceRoot":"","sources":["../../../src/env/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}