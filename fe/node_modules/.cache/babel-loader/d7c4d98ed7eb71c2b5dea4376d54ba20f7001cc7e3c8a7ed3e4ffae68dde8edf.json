{"ast":null,"code":"import moment from \"moment\";\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"closeContact/getPatient\");\n  },\n  filters: {\n    dateFormat(val) {\n      return moment(val).format(\"MMM. DD, YYYY\").toString();\n    }\n  },\n  computed: {\n    ...mapState({\n      contacts: state => state.closeContact.all.data,\n      allContacts: state => state.closeContact.all.allContacts,\n      page: state => state.closeContact.all.page,\n      updateLoading: state => state.closeContact.update.loading,\n      durationDialog: state => state.closeContact.update.dialog,\n      deleteLoading: state => state.closeContact.delete.loading\n    })\n  },\n  data() {\n    return {\n      deleteDialog: false,\n      deleteId: false,\n      deleteSnackBar: false,\n      page_number: 1,\n      docState: \"saved\",\n      changeBtn: true,\n      title: \"\",\n      duration: \"\",\n      updateId: null,\n      inputSearch: \"\"\n    };\n  },\n  methods: {\n    switchs() {\n      this.changeBtn = !this.changeBtn;\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id;\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.deleteDialog = false;\n      console.log(\"closed\");\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch(\"closeContact/updatePatientDuration\", {\n        id: this.updateId,\n        duration: this.duration\n      });\n    },\n    pageSwitch(data) {\n      this.$store.dispatch(\"closeContact/getPatient\", data);\n    },\n    handleSearch() {\n      this.$store.dispatch(\"closeContact/searchPatient\", this.inputSearch);\n    },\n    handleDeleteDialog(data) {\n      this.deleteId = data.id;\n      this.deleteDialog = true;\n    },\n    async handleSubmitDelete() {\n      const res = await this.$store.dispatch(\"closeContact/deletePatient\", {\n        deleteId: this.deleteId\n      });\n      if (res) {\n        this.deleteSnackBar = true;\n        this.deleteId = null;\n        this.deleteDialog = false;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AA6QA;AACA;AACA;EACAA;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACAD;IACA;IACAE;MACA;QACAC;QACAT;MACA;IACA;IACAU;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;MACA;QACAlB;MACA;MAEA;QACA;QACA;QACA;MACA;IACA;EACA;AACA","names":["mounted","filters","dateFormat","computed","contacts","allContacts","page","updateLoading","durationDialog","deleteLoading","data","deleteDialog","deleteId","deleteSnackBar","page_number","docState","changeBtn","title","duration","updateId","inputSearch","methods","switchs","handleDuration","console","closeDialog","handleDurationSubmit","id","pageSwitch","handleSearch","handleDeleteDialog"],"sourceRoot":"src/views/admin/ManageContact","sources":["ContactUser.vue"],"sourcesContent":["<template>\n  <v-container>\n    <div class=\"ma-12\">\n      <h2 class=\"primary--text font-weight-bold mt-12 mb-1\">\n        Manage Close Contacts {{ changeBtn ? \"\" : \"/ View\" }}\n      </h2>\n      <h5 class=\"secondary--text\">\n        Managing who has been in contact of the user\n      </h5>\n      <v-card class=\"rounded-lg mt-8\" width=\"290\">\n        <v-card-title class=\"font-weight-bold primary--text\"\n          >Total Active Patient</v-card-title\n        >\n        <v-card-text>\n          <v-row>\n            <v-col>\n              <div class=\"d-flex align-center justify-center\">\n                <h1 class=\"primary--text mr-4\">{{ allContacts }}</h1>\n                <v-icon size=\"30\">person</v-icon>\n              </div>\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n      <div class=\"adj mt-4 pt-6 d-flex mb-n3\">\n        <v-text-field\n          class=\"mr-2\"\n          label=\"Search here\"\n          solo\n          outlined\n          dense\n          v-model=\"inputSearch\"\n        ></v-text-field>\n        <v-btn color=\"primary\" class=\"py-5\" @click=\"handleSearch\"\n          ><v-icon>search</v-icon></v-btn\n        >\n      </div>\n      <v-simple-table class=\"rounded-lg elevation-6\">\n        <thead>\n          <tr class=\"text-center\">\n            <th class=\"text-left black--text\">\n              <h3>Name</h3>\n            </th>\n\n            <!-- <th class=\"text-left black--text \">\n              <h3>Role</h3>\n            </th> -->\n\n            <th class=\"text-left black--text\">\n              <h3>Active Disease</h3>\n            </th>\n\n            <th class=\"text-left black--text text-center\">\n              <h3>Days left</h3>\n            </th>\n\n            <th class=\"text-left black--text text-center\">\n              <h3>No. of Contacts</h3>\n            </th>\n\n            <th class=\"text-left black--text text-center\">\n              <h3>Date Created</h3>\n            </th>\n\n            <th class=\"text-left black--text text-center\">\n              <h3>Action</h3>\n            </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr\n            class=\"text-center text-capitalize\"\n            v-for=\"contact in contacts\"\n            :key=\"contact.id\"\n          >\n            <td class=\"text-left primary--text font-weight-bold\">\n              {{\n                `${contact.user_account.first_name} ${contact.user_account.middle_name} ${contact.user_account.last_name} `\n              }}\n              <div class=\"secondary--text font-weight-thin\">\n                {{ contact.user_account.classification.name }}\n              </div>\n            </td>\n            <!-- <td class=\"text-left\">{{ contact.user_account.classification.name }}</td> -->\n            <td class=\"text-left\">{{ contact.disease.name }}</td>\n            <td>\n              {{ contact.days_left }}\n              {{ (contact.days_left == 1 || contact.days_left == 0) ? \"day\" : \"days\" }} left\n            </td>\n            <td>\n              {{\n                contact.contacts.length\n                  ? contact.contacts.length\n                  : \"No Contacts\"\n              }}\n            </td>\n            <td>\n              {{ contact.created_at | dateFormat }}\n            </td>\n            <td>\n              <v-menu\n                offset-y\n                bottom\n                transition=\"slide-y-transition\"\n                rounded=\"lg\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn\n                    color=\"primary\"\n                    dark\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                    icon\n                    large\n                  >\n                    <v-icon>menu_open</v-icon>\n                  </v-btn>\n                </template>\n                <v-list>\n                  <v-list-item\n                    :to=\"`/admin/checkprofile/${contact.user_account.id}`\"\n                  >\n                    <v-list-item-icon class=\"mr-4\"\n                      ><v-icon color=\"primary\"\n                        >account_circle</v-icon\n                      ></v-list-item-icon\n                    >\n                    <v-list-item-title class=\"font-weight-bold\"\n                      ><h5>Check Profile</h5></v-list-item-title\n                    >\n                  </v-list-item>\n                  <v-divider></v-divider>\n                  <v-list-item @click=\"handleDuration(contact)\">\n                    <v-list-item-icon class=\"mr-4\"\n                      ><v-icon color=\"primary\">timer</v-icon></v-list-item-icon\n                    >\n                    <v-list-item-title class=\"font-weight-bold\"\n                      ><h5>Edit Duration</h5></v-list-item-title\n                    >\n                  </v-list-item>\n                  <v-divider></v-divider>\n                  <v-list-item\n                    :to=\"`/admin/manage/viewtrace/${contact.user_account.id}/${contact.id}`\"\n                  >\n                    <v-list-item-icon class=\"mr-4\"\n                      ><v-icon color=\"primary\"\n                        >reduce_capacity</v-icon\n                      ></v-list-item-icon\n                    >\n                    <v-list-item-title class=\"font-weight-bold\"\n                      ><h5>View Contacts</h5></v-list-item-title\n                    >\n                  </v-list-item>\n                  <v-divider></v-divider>\n                  <v-list-item @click=\"handleDeleteDialog(contact)\">\n                    <v-list-item-icon class=\"mr-4\"\n                      ><v-icon color=\"error\">delete</v-icon></v-list-item-icon\n                    >\n                    <v-list-item-title class=\"font-weight-bold\"\n                      ><h5>Delete Patient</h5></v-list-item-title\n                    >\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n            </td>\n          </tr>\n        </tbody>\n      </v-simple-table>\n\n      <!-- Edit Duration -->\n      <v-dialog\n        v-model=\"durationDialog\"\n        width=\"auto\"\n        @click:outside=\"closeDialog\"\n      >\n        <v-card>\n          <v-card-title class=\"primary accent--text font-weight-bold\"\n            >Edit Duration</v-card-title\n          >\n          <v-card-text class=\"mt-8\">\n            <v-text-field\n              name=\"duration\"\n              label=\" Set Duration (Day)\"\n              v-model=\"duration\"\n              id=\"id\"\n              outlined\n              filled\n            ></v-text-field>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"black\"\n              class=\"text-capitalize\"\n              text\n              plain\n              @click=\"closeDialog\"\n              >cancel</v-btn\n            >\n            <v-btn\n              color=\"primary\"\n              class=\"text-capitalize\"\n              :loading=\"updateLoading\"\n              @click=\"handleDurationSubmit\"\n              >Update</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n      <!-- Delete -->\n      <v-dialog\n        v-model=\"deleteDialog\"\n        width=\"auto\"\n        @click:outside=\"closeDialog\"\n      >\n        <v-card>\n          <v-card-title class=\"primary accent--text font-weight-bold\"\n            >Delete Patient</v-card-title\n          >\n          <v-card-text class=\"mt-8\">\n            <div>\n              <h3>Are you sure to delete this user ?</h3>\n            </div>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"black\"\n              class=\"text-capitalize\"\n              text\n              plain\n              @click=\"closeDialog\"\n              >cancel</v-btn\n            >\n            <v-btn\n              color=\"error\"\n              class=\"text-capitalize\"\n              :loading=\"deleteLoading\"\n              @click=\"handleSubmitDelete\"\n              >delete</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n      <v-snackbar\n        v-model=\"deleteSnackBar\"\n        bottom\n        right\n        color=\"error\"\n      >\n        <v-icon>check</v-icon>\n        Patient Deleted Successfully\n      </v-snackbar>\n      <v-pagination\n        v-model=\"page_number\"\n        :length=\"page\"\n        class=\"float-right mt-4\"\n        @input=\"pageSwitch\"\n      ></v-pagination>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"closeContact/getPatient\");\n  },\n  filters: {\n    dateFormat(val) {\n      return moment(val).format(\"MMM. DD, YYYY\").toString();\n    },\n  },\n  computed: {\n    ...mapState({\n      contacts: (state) => state.closeContact.all.data,\n      allContacts: (state) => state.closeContact.all.allContacts,\n      page: (state) => state.closeContact.all.page,\n      updateLoading: (state) => state.closeContact.update.loading,\n      durationDialog: (state) => state.closeContact.update.dialog,\n      deleteLoading: (state) => state.closeContact.delete.loading,\n    }),\n  },\n  data() {\n    return {\n      deleteDialog: false,\n      deleteId: false,\n      deleteSnackBar: false,\n      page_number: 1,\n      docState: \"saved\",\n      changeBtn: true,\n      title: \"\",\n      duration: \"\",\n      updateId: null,\n      inputSearch: \"\",\n    };\n  },\n  methods: {\n    switchs() {\n      this.changeBtn = !this.changeBtn;\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id;\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.deleteDialog = false;\n      console.log(\"closed\");\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch(\"closeContact/updatePatientDuration\", {\n        id: this.updateId,\n        duration: this.duration,\n      });\n    },\n    pageSwitch(data) {\n      this.$store.dispatch(\"closeContact/getPatient\", data);\n    },\n    handleSearch() {\n      this.$store.dispatch(\"closeContact/searchPatient\", this.inputSearch);\n    },\n    handleDeleteDialog(data) {\n      this.deleteId = data.id;\n      this.deleteDialog = true;\n    },\n    async handleSubmitDelete() {\n      const res = await this.$store.dispatch(\"closeContact/deletePatient\", {\n        deleteId: this.deleteId,\n      });\n\n      if (res) {\n        this.deleteSnackBar = true;\n        this.deleteId = null;\n        this.deleteDialog = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.bg {\n  background-color: #f8f0f0;\n}\n.adj {\n  width: 280px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}