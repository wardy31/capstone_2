{"ast":null,"code":"import { mapState } from \"vuex\";\nimport moment from \"moment\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"declaration/getSubmitted\");\n  },\n  filters: {\n    filterDate(val) {\n      return moment(val).format(\"MMM DD, YYYY\").toString();\n    },\n    filterTime(val) {\n      return moment(val).format(\"h:mm a\").toString();\n    },\n    subQ(val) {\n      return val;\n    }\n  },\n  computed: {\n    ...mapState({\n      responses: state => state.declaration.responses.data,\n      page: state => state.declaration.responses.page,\n      today: state => state.declaration.responses.today,\n      total: state => state.declaration.responses.total\n    })\n  },\n  data() {\n    return {\n      page_number: null,\n      checkDialog: false,\n      responseData: null,\n      inputSearch: \"\"\n    };\n  },\n  methods: {\n    pageSwitch(data) {\n      this.page_number = data;\n      this.$store.dispatch(\"declaration/getSubmitted\", data);\n    },\n    handleResponse(data) {\n      this.checkDialog = true;\n      this.responseData = data;\n    },\n    handleQuestion(data) {\n      console.log(data.split(\",\"));\n      if (data.trim()) {\n        const arr = data.split(\",\");\n        return arr;\n      }\n      return [];\n    },\n    handleSearch() {\n      this.$store.dispatch(\"declaration/responseSearch\", this.inputSearch);\n    }\n  }\n};","map":{"version":3,"mappings":"AAmJA;AACA;AACA;EACAA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["mounted","filters","filterDate","filterTime","subQ","computed","responses","page","today","total","data","page_number","checkDialog","responseData","inputSearch","methods","pageSwitch","handleResponse","handleQuestion","console","handleSearch"],"sourceRoot":"src/views/admin","sources":["DeclarationForm.vue"],"sourcesContent":["<template>\r\n  <v-app class=\"bg\">\r\n    <v-main class=\"bg\">\r\n      <div class=\"ma-12\">\r\n        <h2 class=\"primary--text font-weight-bold mt-12 mb-1\">\r\n          Health Declaration Records\r\n        </h2>\r\n        <h5 class=\"secondary--text\">user's health declaration responses</h5>\r\n\r\n        <v-row justify=\"start\" class=\"mt-8\">\r\n          <v-col cols=\"4\">\r\n            <v-card class=\"rounded-lg\">\r\n              <v-card-title class=\"font-weight-bold primary--text\"\r\n                >Today Responses</v-card-title\r\n              >\r\n              <v-card-text>\r\n                <v-row>\r\n                  <v-col>\r\n                    <div class=\"d-flex justify-center py-6\">\r\n                      <h1 class=\"teal--text\">{{today}}</h1>\r\n                    </div>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n          <v-col cols=\"4\">\r\n            <v-card class=\"rounded-lg\">\r\n              <v-card-title class=\"font-weight-bold primary--text\"\r\n                >Total Responses</v-card-title\r\n              >\r\n              <v-card-text>\r\n                <v-row>\r\n                  <v-col>\r\n                    <div class=\"d-flex justify-center py-6\">\r\n                      <h1 class=\"secondary--text mr-4\">{{total}}</h1>\r\n                    </div>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n\r\n        <div class=\"adj mt-12 mb-n3 d-flex\">\r\n          <v-text-field\r\n            class=\"mr-2\"\r\n            label=\"Search here\"\r\n            solo\r\n            dense\r\n            v-model=\"inputSearch\"\r\n          ></v-text-field>\r\n          <v-btn color=\"primary\" @click=\"handleSearch\"><v-icon>search</v-icon></v-btn>\r\n        </div>\r\n\r\n        <v-simple-table class=\"rounded-lg elevation-6\">\r\n          <thead>\r\n            <tr>\r\n              <th class=\"text-left black--text\">Name</th>\r\n\r\n              <th class=\"text-left black--text text-center\">Time Submitted</th>\r\n\r\n              <th class=\"text-left black--text text-center\">Date Submitted</th>\r\n\r\n              <th class=\"text-left black--text text-center\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            <tr\r\n              class=\"text-center\"\r\n              v-for=\"response in responses\"\r\n              :key=\"response.id\"\r\n            >\r\n            <td class=\"text-left font-weight-bold primary--text text-capitalize\">\r\n              {{\r\n                `${response.user_account.first_name} ${response.user_account.middle_name} ${response.user_account.last_name}`\r\n              }}\r\n              <div class=\"secondary--text font-weight-thin\">\r\n                {{ response.user_account.classification.name }}\r\n              </div>\r\n            </td>\r\n              <td>{{ response.created_at | filterTime }}</td>\r\n              <td>{{ response.created_at | filterDate }}</td>\r\n              <td>\r\n                <v-tooltip bottom>\r\n                  <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-btn\r\n                      color=\"primary\"\r\n                      dark\r\n                      v-bind=\"attrs\"\r\n                      v-on=\"on\"\r\n                      icon\r\n                      @click=\"handleResponse(response.answers)\"\r\n                      ><v-icon>description</v-icon></v-btn\r\n                    >\r\n                  </template>\r\n                  <span>Check Form</span>\r\n                </v-tooltip>\r\n                <!-- \r\n                  <v-tooltip bottom>\r\n                    <template v-slot:activator=\"{ on, attrs }\">\r\n                      <v-btn color=\"error\" dark v-bind=\"attrs\" v-on=\"on\" icon><v-icon>delete_forever</v-icon></v-btn>\r\n                    </template>\r\n                      <span>Delete</span>\r\n                  </v-tooltip> -->\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </v-simple-table>\r\n        <v-pagination\r\n          v-model=\"page_number\"\r\n          :length=\"page\"\r\n          class=\"float-left mt-4\"\r\n          @input=\"pageSwitch\"\r\n        ></v-pagination>\r\n      </div>\r\n    </v-main>\r\n    <v-dialog v-model=\"checkDialog\" width=\"540\">\r\n      <v-app-bar color=\"primary\" >\r\n        <v-app-bar-title class=\"white--text\">\r\n          <h5>Response</h5>\r\n        </v-app-bar-title>\r\n      </v-app-bar>\r\n      <v-card v-for=\"(response,index) in responseData\" :key=\"response.id\" tile>\r\n        <v-card-title primary-title class=\"text-justify\">\r\n          <h6>{{ `${index + 1}. ${response.question.question}` }}</h6>\r\n        </v-card-title>\r\n\r\n        <v-card-text>\r\n          <ul v-if=\"response.question.sub_question\" class=\"mt-n4\">\r\n            <li v-for=\"(q,index) in handleQuestion(response.question.sub_question)\" :key=\"index\">\r\n              <h4>{{q}}</h4>          \r\n            </li>\r\n          </ul>\r\n\r\n          <div class=\"mt-4\">\r\n            <!-- <h4 class=\"primary--text\">Answer: {{response.answer == 1 ? \"True\" : \"False\"   }}</h4> -->\r\n            <v-text-field outlined readonly label=\"Answer\" :value=\"response.answer == 1 ? `Yes` : `No`\"></v-text-field>\r\n          </div>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  mounted() {\r\n    this.$store.dispatch(\"declaration/getSubmitted\");\r\n  },\r\n  filters: {\r\n    filterDate(val) {\r\n      return moment(val).format(\"MMM DD, YYYY\").toString();\r\n    },\r\n    filterTime(val) {\r\n      return moment(val).format(\"h:mm a\").toString();\r\n    },\r\n    subQ(val){\r\n      return val\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      responses: (state) => state.declaration.responses.data,\r\n      page: (state) => state.declaration.responses.page,\r\n      today: (state) => state.declaration.responses.today,\r\n      total: (state) => state.declaration.responses.total,\r\n    }),\r\n  },\r\n  data() {\r\n    return {\r\n      page_number: null,\r\n      checkDialog: false,\r\n      responseData: null,\r\n      inputSearch:\"\"\r\n    };\r\n  },\r\n  methods: {\r\n    pageSwitch(data) {\r\n      this.page_number = data;\r\n      this.$store.dispatch(\"declaration/getSubmitted\", data);\r\n    },\r\n    handleResponse(data) {\r\n      this.checkDialog = true;\r\n      this.responseData = data;\r\n    },\r\n    handleQuestion(data){\r\n      console.log(data.split(\",\"));\r\n      if(data.trim()){\r\n        const arr = data.split(\",\")\r\n        return arr\r\n      }\r\n      return []\r\n    },\r\n    handleSearch(){ \r\n      this.$store.dispatch(\"declaration/responseSearch\", this.inputSearch);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.bg {\r\n  background-color: whitesmoke;\r\n}\r\n.adj {\r\n  width: 280px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}