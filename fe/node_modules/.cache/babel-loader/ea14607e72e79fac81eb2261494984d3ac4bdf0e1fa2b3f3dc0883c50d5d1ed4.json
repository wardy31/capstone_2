{"ast":null,"code":"import moment from 'moment';\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"user/checkProfile\", this.$route.params.id);\n    this.$store.dispatch(\"closeContact/getContacts\", this.$route.params.patientId);\n  },\n  filters: {\n    dateFormat(val) {\n      return moment(val).format('MMM. DD, YYYY').toString();\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.checkProfile.data,\n      contacts: state => state.closeContact.all.data,\n      durationDialog: state => state.closeContact.update.dialog,\n      deleteDialog: state => state.closeContact.delete.dialog,\n      deleteLoading: state => state.closeContact.delete.loading,\n      updateLoading: state => state.closeContact.update.loading\n    })\n  },\n  data() {\n    return {\n      page: 1,\n      duration: \"\",\n      deleteId: '',\n      updateId: ''\n    };\n  },\n  methods: {\n    changeBtn() {\n      this.$router.go(-1);\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id;\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    handleDelete(data) {\n      console.log('handle', data.id);\n      this.deleteId = data.id;\n      this.$store.state.closeContact.delete.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.$store.state.closeContact.delete.dialog = false;\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch('closeContact/updateTaggedDuration', {\n        id: this.updateId,\n        duration: this.duration,\n        paramId: this.$route.params.patientId\n      });\n    },\n    handleDeleteSubmit() {\n      this.$store.dispatch('closeContact/deleteTagged', {\n        deleteId: this.deleteId,\n        paramId: this.$route.params.patientId\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA4NA;AACA;AACA;EACAA;IACA;IACA,qBACA,4BACA,6BACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACAD;MACA;MACA;IACA;IACAE;MACA;MACA;IACA;IACAC;MACA;QAAAC;QAAAV;QAAAW;MAAA;IACA;IACAC;MACA;QAAAX;QAAAU;MAAA;IACA;EACA;AACA","names":["mounted","filters","dateFormat","computed","user","contacts","durationDialog","deleteDialog","deleteLoading","updateLoading","data","page","duration","deleteId","updateId","methods","changeBtn","handleDuration","console","handleDelete","closeDialog","handleDurationSubmit","id","paramId","handleDeleteSubmit"],"sourceRoot":"src/views/admin","sources":["ViewTraceContact.vue"],"sourcesContent":["<template>\n  <v-container>\n    <div class=\"ma-16\">\n      <h2 class=\"primary--text font-weight-bold mt-12 mb-1\">\n        View Close Contacts\n      </h2>\n      <h5 class=\"secondary--text\">List of user close contacts</h5>\n\n      <div class=\"d-flex align-center mt-12\">\n        <v-btn color=\"primary\" @click=\"changeBtn()\" rounded small\n          ><v-icon left>arrow_back</v-icon>\n          <h4>return</h4></v-btn\n        >\n        <h2 class=\"ml-4 text-capitalize\">\n          {{ `${user.first_name} ${user.middle_name} ${user.last_name}` }}\n        </h2>\n      </div>\n\n      <!-- <div class=\"d-flex align-stretch mt-12\">\n            <v-select label=\"Time Frame\" outlined  filled dense></v-select>\n            <v-select label=\"Location\" outlined  filled dense class=\"ml-2\"></v-select>\n            <v-btn color=\"primary\" class=\"ml-2 py-5\" medium text><v-icon left>filter_list</v-icon> <h4>Filter</h4></v-btn>\n        </div> -->\n\n      <v-card class=\"rounded-lg elevation-6 mt-6\">\n        <v-simple-table>\n          <thead>\n            <tr class=\"text-center\">\n              <th class=\"text-left black--text \">\n                <h3>Name</h3>\n              </th>\n\n              <!-- <th class=\"text-left black--text \">\n                <h3>Role</h3>\n              </th> -->\n\n              <th class=\"text-left black--text \">\n                <h3>Active Disease</h3>\n              </th>\n\n              <th class=\"text-center black--text \">\n                <h3>Days Left</h3>\n              </th>\n              <th class=\"text-center black--text \">\n                <h3>Date Created</h3>\n              </th>\n              <th class=\"text-left black--text text-center\">\n                <h3>Action</h3>\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr\n              class=\"text-center text-capitalize\"\n              v-for=\"contact in contacts\"\n              :key=\"contact.id\"\n            >\n            <td class=\"text-left primary--text font-weight-bold\">\n              {{\n                `${contact.user_account.first_name} ${contact.user_account.middle_name} ${contact.user_account.last_name} `\n              }}\n              <div class=\"secondary--text font-weight-thin\">\n                {{ contact.user_account.classification.name }}\n              </div>\n            </td>\n              <!-- <td class=\"text-left\">\n                {{ contact.user_account.classification.name }}\n              </td> -->\n\n              <td class=\"text-left text-capitalize\">\n                {{ contact.disease.name }}\n              </td>\n\n              <td>{{ contact.days_left }} {{(contact.days_left == 1 || contact.days_left == 0)  ? \"day\" : \"days\" }} left</td>\n\n              <td class=\"text-center\">\n                {{\n                  contact.created_at | dateFormat\n                }}\n              </td>\n              <td>\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      color=\"primary\"\n                      @click=\"handleDuration(contact)\"\n                      dark\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      icon\n                      large\n                      ><v-icon>timer</v-icon></v-btn\n                    >\n                  </template>\n                  <span>Edit Duration</span>\n                </v-tooltip>\n                <v-tooltip bottom>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      color=\"error\"\n                      @click=\"handleDelete(contact)\"\n                      dark\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      icon\n                      large\n                      ><v-icon>delete_forever</v-icon></v-btn\n                    >\n                  </template>\n                  <span>Remove User</span>\n                </v-tooltip>\n              </td>\n              <!-- <td>2:00 pm</td>\n              <td>4:00 pm</td> -->\n              <!-- <td><v-chip color=\"primary\"><v-icon left>hdr_weak</v-icon> Good</v-chip></td> -->\n              <!-- <td>\n                <v-menu offset-y bottom transition=\"slide-y-transition\" rounded=\"lg\">\n                 <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn color=\"primary\" dark v-bind=\"attrs\" v-on=\"on\" icon large>\n                    <v-icon>menu_open</v-icon>\n                  </v-btn>\n                </template>\n                <v-list>\n                    <v-list-item to=\"/admin/checkprofile\">\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">account_circle</v-icon></v-list-item-icon>\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Check Profile</h5></v-list-item-title>\n                    </v-list-item>\n                    <v-divider></v-divider>\n                    <v-list-item>\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">connect_without_contact</v-icon></v-list-item-icon>\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Mark as close contact</h5></v-list-item-title>\n                    </v-list-item> -->\n              <!-- <v-list-item>\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">6_ft_apart</v-icon></v-list-item-icon>\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Mark as possible close contact</h5></v-list-item-title>\n                    </v-list-item> -->\n              <!-- </v-list>\n                </v-menu> -->\n              <!-- </td> -->\n            </tr>\n          </tbody>\n        </v-simple-table>\n      </v-card>\n      <!-- <v-pagination\n        v-model=\"page\"\n        :length=\"4\"\n        class=\"float-right mt-4\"\n        @input=\"pageSwitch\"\n      ></v-pagination> -->\n\n      <!-- Update Duration Dialog -->\n      <v-dialog\n        v-model=\"durationDialog\"\n        width=\"auto\"\n        @click:outside=\"closeDialog\"\n      >\n        <v-card>\n          <v-card-title class=\"primary accent--text font-weight-bold\"\n            >Edit Duration</v-card-title\n          >\n          <v-card-text class=\"mt-8\">\n            <v-text-field\n              name=\"duration\"\n              label=\" Set Duration (Day)\"\n              v-model=\"duration\"\n              id=\"id\"\n              outlined\n              filled\n            ></v-text-field>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"black\"\n              class=\"text-capitalize\"\n              text\n              plain\n              @click=\"closeDialog\"\n              >cancel</v-btn\n            >\n            <v-btn color=\"primary\" class=\"text-capitalize\" :loading=\"updateLoading\" @click=\"handleDurationSubmit\">Update</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n      <!-- Delete user -->\n      <v-dialog\n        v-model=\"deleteDialog\"\n        width=\"auto\"\n        @click:outside=\"closeDialog\"\n      >\n        <v-card>\n          <v-card-title class=\"primary accent--text font-weight-bold\"\n            >Remove User</v-card-title\n          >\n          <v-card-text class=\"py-6\">\n            <div class=\"pr-12 text-h6\">Are you sure to remove?</div>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"black\"\n              class=\"text-capitalize\"\n              text\n              plain\n              @click=\"closeDialog\"\n              >cancel</v-btn\n            >\n            <v-btn color=\"error\" class=\"text-capitalize\" :loading=\"deleteLoading\" @click=\"handleDeleteSubmit()\">Remove</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"user/checkProfile\", this.$route.params.id);\n    this.$store.dispatch(\n      \"closeContact/getContacts\",\n      this.$route.params.patientId\n    );\n  },\n  filters:{\n    dateFormat(val){\n      return moment(val).format('MMM. DD, YYYY').toString()\n    }\n  },\n  computed: {\n    ...mapState({\n      user: (state) => state.user.checkProfile.data,\n      contacts: (state) => state.closeContact.all.data,\n      durationDialog: (state) => state.closeContact.update.dialog,\n      deleteDialog: (state) => state.closeContact.delete.dialog,\n      deleteLoading: state => state.closeContact.delete.loading,\n      updateLoading: state => state.closeContact.update.loading\n    }),\n  },\n  data() {\n    return {\n      page: 1,\n      duration: \"\",\n      deleteId:'',\n      updateId:''\n    };\n  },\n  methods: {\n    changeBtn() {\n      this.$router.go(-1);\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    handleDelete(data) {\n      console.log('handle', data.id);\n      this.deleteId = data.id\n      this.$store.state.closeContact.delete.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.$store.state.closeContact.delete.dialog = false;\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch('closeContact/updateTaggedDuration',{id:this.updateId,duration:this.duration,paramId:this.$route.params.patientId})\n    },\n    handleDeleteSubmit() {\n      this.$store.dispatch('closeContact/deleteTagged',{deleteId:this.deleteId,paramId:this.$route.params.patientId})\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}