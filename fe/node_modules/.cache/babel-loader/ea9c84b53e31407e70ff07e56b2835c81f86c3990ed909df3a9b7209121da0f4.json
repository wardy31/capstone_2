{"ast":null,"code":"import { env } from '../env';\nimport { createCanvas, createCanvasFromMedia } from './createCanvas';\nimport { getContext2dOrThrow } from './getContext2dOrThrow';\nimport { getMediaDimensions } from './getMediaDimensions';\nexport function imageToSquare(input, inputSize, centerImage) {\n  if (centerImage === void 0) {\n    centerImage = false;\n  }\n  var _a = env.getEnv(),\n    Image = _a.Image,\n    Canvas = _a.Canvas;\n  if (!(input instanceof Image || input instanceof Canvas)) {\n    throw new Error('imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement');\n  }\n  var dims = getMediaDimensions(input);\n  var scale = inputSize / Math.max(dims.height, dims.width);\n  var width = scale * dims.width;\n  var height = scale * dims.height;\n  var targetCanvas = createCanvas({\n    width: inputSize,\n    height: inputSize\n  });\n  var inputCanvas = input instanceof Canvas ? input : createCanvasFromMedia(input);\n  var offset = Math.abs(width - height) / 2;\n  var dx = centerImage && width < height ? offset : 0;\n  var dy = centerImage && height < width ? offset : 0;\n  getContext2dOrThrow(targetCanvas).drawImage(inputCanvas, dx, dy, width, height);\n  return targetCanvas;\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAG,QAAQ,QAAQ;AAC5B,SAASC,YAAY,EAAEC,qBAAqB,QAAQ,gBAAgB;AACpE,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,SAASC,kBAAkB,QAAQ,sBAAsB;AAEzD,OAAM,SAAUC,aAAa,CAACC,KAA2C,EAAEC,SAAiB,EAAEC,WAA4B;EAA5B;IAAAA,mBAA4B;EAAA;EAElH,qBAAgC;IAA9BC,gBAAK;IAAEC,kBAAuB;EAEtC,IAAI,EAAEJ,KAAK,YAAYG,KAAK,IAAIH,KAAK,YAAYI,MAAM,CAAC,EAAE;IACxD,MAAM,IAAIC,KAAK,CAAC,0EAA0E,CAAC;;EAG7F,IAAMC,IAAI,GAAGR,kBAAkB,CAACE,KAAK,CAAC;EACtC,IAAMO,KAAK,GAAGN,SAAS,GAAGO,IAAI,CAACC,GAAG,CAACH,IAAI,CAACI,MAAM,EAAEJ,IAAI,CAACK,KAAK,CAAC;EAC3D,IAAMA,KAAK,GAAGJ,KAAK,GAAGD,IAAI,CAACK,KAAK;EAChC,IAAMD,MAAM,GAAGH,KAAK,GAAGD,IAAI,CAACI,MAAM;EAElC,IAAME,YAAY,GAAGjB,YAAY,CAAC;IAAEgB,KAAK,EAAEV,SAAS;IAAES,MAAM,EAAET;EAAS,CAAE,CAAC;EAC1E,IAAMY,WAAW,GAAGb,KAAK,YAAYI,MAAM,GAAGJ,KAAK,GAAGJ,qBAAqB,CAACI,KAAK,CAAC;EAElF,IAAMc,MAAM,GAAGN,IAAI,CAACO,GAAG,CAACJ,KAAK,GAAGD,MAAM,CAAC,GAAG,CAAC;EAC3C,IAAMM,EAAE,GAAGd,WAAW,IAAIS,KAAK,GAAGD,MAAM,GAAGI,MAAM,GAAG,CAAC;EACrD,IAAMG,EAAE,GAAGf,WAAW,IAAIQ,MAAM,GAAGC,KAAK,GAAGG,MAAM,GAAG,CAAC;EACrDjB,mBAAmB,CAACe,YAAY,CAAC,CAACM,SAAS,CAACL,WAAW,EAAEG,EAAE,EAAEC,EAAE,EAAEN,KAAK,EAAED,MAAM,CAAC;EAE/E,OAAOE,YAAY;AACrB","names":["env","createCanvas","createCanvasFromMedia","getContext2dOrThrow","getMediaDimensions","imageToSquare","input","inputSize","centerImage","Image","Canvas","Error","dims","scale","Math","max","height","width","targetCanvas","inputCanvas","offset","abs","dx","dy","drawImage"],"sourceRoot":"","sources":["../../../src/dom/imageToSquare.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}