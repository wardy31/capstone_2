{"ast":null,"code":"import moment from 'moment';\nimport { mapState } from \"vuex\";\nexport default {\n  mounted() {\n    this.$store.dispatch(\"user/checkProfile\", this.$route.params.id);\n    this.$store.dispatch(\"closeContact/getContacts\", this.$route.params.patientId);\n  },\n  filters: {\n    dateFormat(val) {\n      return moment(val).format('MMM. DD, YYYY').toString();\n    }\n  },\n  computed: {\n    ...mapState({\n      user: state => state.user.checkProfile.data,\n      contacts: state => state.closeContact.all.data,\n      durationDialog: state => state.closeContact.update.dialog,\n      deleteDialog: state => state.closeContact.delete.dialog,\n      deleteLoading: state => state.closeContact.delete.loading,\n      updateLoading: state => state.closeContact.update.loading\n    })\n  },\n  data() {\n    return {\n      page: 1,\n      duration: \"\",\n      deleteId: '',\n      updateId: ''\n    };\n  },\n  methods: {\n    changeBtn() {\n      this.$router.go(-1);\n    },\n    handleDuration(data) {\n      console.log(data);\n      this.duration = data.days_left;\n      this.updateId = data.id;\n      this.$store.state.closeContact.update.dialog = true;\n    },\n    handleDelete(data) {\n      console.log('handle', data.id);\n      this.deleteId = data.id;\n      this.$store.state.closeContact.delete.dialog = true;\n    },\n    closeDialog() {\n      this.$store.state.closeContact.update.dialog = false;\n      this.$store.state.closeContact.delete.dialog = false;\n    },\n    handleDurationSubmit() {\n      this.$store.dispatch('closeContact/updateTaggedDuration', {\n        id: this.updateId,\n        duration: this.duration,\n        paramId: this.$route.params.patientId\n      });\n    },\n    handleDeleteSubmit() {\n      this.$store.dispatch('closeContact/deleteTagged', {\n        deleteId: this.deleteId,\n        paramId: this.$route.params.patientId\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA4NA;AACA;AACA;EACAA;IACA;IACA,qBACA,4BACA,6BACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACAD;MACA;MACA;IACA;IACAE;MACA;MACA;IACA;IACAC;MACA;QAAAC;QAAAV;QAAAW;MAAA;IACA;IACAC;MACA;QAAAX;QAAAU;MAAA;IACA;EACA;AACA","names":["mounted","filters","dateFormat","computed","user","contacts","durationDialog","deleteDialog","deleteLoading","updateLoading","data","page","duration","deleteId","updateId","methods","changeBtn","handleDuration","console","handleDelete","closeDialog","handleDurationSubmit","id","paramId","handleDeleteSubmit"],"sourceRoot":"src/views/admin","sources":["ViewTraceContact.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <div class=\"ma-16\">\r\n      <h2 class=\"primary--text font-weight-bold mt-12 mb-1\">\r\n        View Close Contacts\r\n      </h2>\r\n      <h5 class=\"secondary--text\">List of user close contacts</h5>\r\n\r\n      <div class=\"d-flex align-center mt-12\">\r\n        <v-btn color=\"primary\" @click=\"changeBtn()\" rounded small\r\n          ><v-icon left>arrow_back</v-icon>\r\n          <h4>return</h4></v-btn\r\n        >\r\n        <h2 class=\"ml-4 text-capitalize\">\r\n          {{ `${user.first_name} ${user.middle_name} ${user.last_name}` }}\r\n        </h2>\r\n      </div>\r\n\r\n      <!-- <div class=\"d-flex align-stretch mt-12\">\r\n            <v-select label=\"Time Frame\" outlined  filled dense></v-select>\r\n            <v-select label=\"Location\" outlined  filled dense class=\"ml-2\"></v-select>\r\n            <v-btn color=\"primary\" class=\"ml-2 py-5\" medium text><v-icon left>filter_list</v-icon> <h4>Filter</h4></v-btn>\r\n        </div> -->\r\n\r\n      <v-card class=\"rounded-lg elevation-6 mt-6\">\r\n        <v-simple-table>\r\n          <thead>\r\n            <tr class=\"text-center\">\r\n              <th class=\"text-left black--text \">\r\n                <h3>Name</h3>\r\n              </th>\r\n\r\n              <!-- <th class=\"text-left black--text \">\r\n                <h3>Role</h3>\r\n              </th> -->\r\n\r\n              <th class=\"text-left black--text \">\r\n                <h3>Active Disease</h3>\r\n              </th>\r\n\r\n              <th class=\"text-center black--text \">\r\n                <h3>Days Left</h3>\r\n              </th>\r\n              <th class=\"text-center black--text \">\r\n                <h3>Date Created</h3>\r\n              </th>\r\n              <th class=\"text-left black--text text-center\">\r\n                <h3>Action</h3>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            <tr\r\n              class=\"text-center text-capitalize\"\r\n              v-for=\"contact in contacts\"\r\n              :key=\"contact.id\"\r\n            >\r\n            <td class=\"text-left primary--text font-weight-bold\">\r\n              {{\r\n                `${contact.user_account.first_name} ${contact.user_account.middle_name} ${contact.user_account.last_name} `\r\n              }}\r\n              <div class=\"secondary--text font-weight-thin\">\r\n                {{ contact.user_account.classification.name }}\r\n              </div>\r\n            </td>\r\n              <!-- <td class=\"text-left\">\r\n                {{ contact.user_account.classification.name }}\r\n              </td> -->\r\n\r\n              <td class=\"text-left text-capitalize\">\r\n                {{ contact.disease.name }}\r\n              </td>\r\n\r\n              <td>{{ contact.days_left }} {{(contact.days_left == 1 || contact.days_left == 0)  ? \"day\" : \"days\" }} left</td>\r\n\r\n              <td class=\"text-center\">\r\n                {{\r\n                  contact.created_at | dateFormat\r\n                }}\r\n              </td>\r\n              <td>\r\n                <v-tooltip bottom>\r\n                  <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-btn\r\n                      color=\"primary\"\r\n                      @click=\"handleDuration(contact)\"\r\n                      dark\r\n                      v-bind=\"attrs\"\r\n                      v-on=\"on\"\r\n                      icon\r\n                      large\r\n                      ><v-icon>timer</v-icon></v-btn\r\n                    >\r\n                  </template>\r\n                  <span>Edit Duration</span>\r\n                </v-tooltip>\r\n                <v-tooltip bottom>\r\n                  <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-btn\r\n                      color=\"error\"\r\n                      @click=\"handleDelete(contact)\"\r\n                      dark\r\n                      v-bind=\"attrs\"\r\n                      v-on=\"on\"\r\n                      icon\r\n                      large\r\n                      ><v-icon>delete_forever</v-icon></v-btn\r\n                    >\r\n                  </template>\r\n                  <span>Remove User</span>\r\n                </v-tooltip>\r\n              </td>\r\n              <!-- <td>2:00 pm</td>\r\n              <td>4:00 pm</td> -->\r\n              <!-- <td><v-chip color=\"primary\"><v-icon left>hdr_weak</v-icon> Good</v-chip></td> -->\r\n              <!-- <td>\r\n                <v-menu offset-y bottom transition=\"slide-y-transition\" rounded=\"lg\">\r\n                 <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn color=\"primary\" dark v-bind=\"attrs\" v-on=\"on\" icon large>\r\n                    <v-icon>menu_open</v-icon>\r\n                  </v-btn>\r\n                </template>\r\n                <v-list>\r\n                    <v-list-item to=\"/admin/checkprofile\">\r\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">account_circle</v-icon></v-list-item-icon>\r\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Check Profile</h5></v-list-item-title>\r\n                    </v-list-item>\r\n                    <v-divider></v-divider>\r\n                    <v-list-item>\r\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">connect_without_contact</v-icon></v-list-item-icon>\r\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Mark as close contact</h5></v-list-item-title>\r\n                    </v-list-item> -->\r\n              <!-- <v-list-item>\r\n                        <v-list-item-icon class=\"mr-4\"><v-icon  color=\"primary\">6_ft_apart</v-icon></v-list-item-icon>\r\n                        <v-list-item-title class=\"font-weight-bold\"><h5>Mark as possible close contact</h5></v-list-item-title>\r\n                    </v-list-item> -->\r\n              <!-- </v-list>\r\n                </v-menu> -->\r\n              <!-- </td> -->\r\n            </tr>\r\n          </tbody>\r\n        </v-simple-table>\r\n      </v-card>\r\n      <!-- <v-pagination\r\n        v-model=\"page\"\r\n        :length=\"4\"\r\n        class=\"float-right mt-4\"\r\n        @input=\"pageSwitch\"\r\n      ></v-pagination> -->\r\n\r\n      <!-- Update Duration Dialog -->\r\n      <v-dialog\r\n        v-model=\"durationDialog\"\r\n        width=\"auto\"\r\n        @click:outside=\"closeDialog\"\r\n      >\r\n        <v-card>\r\n          <v-card-title class=\"primary accent--text font-weight-bold\"\r\n            >Edit Duration</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-8\">\r\n            <v-text-field\r\n              name=\"duration\"\r\n              label=\" Set Duration (Day)\"\r\n              v-model=\"duration\"\r\n              id=\"id\"\r\n              outlined\r\n              filled\r\n            ></v-text-field>\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n              color=\"black\"\r\n              class=\"text-capitalize\"\r\n              text\r\n              plain\r\n              @click=\"closeDialog\"\r\n              >cancel</v-btn\r\n            >\r\n            <v-btn color=\"primary\" class=\"text-capitalize\" :loading=\"updateLoading\" @click=\"handleDurationSubmit\">Update</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n\r\n      <!-- Delete user -->\r\n      <v-dialog\r\n        v-model=\"deleteDialog\"\r\n        width=\"auto\"\r\n        @click:outside=\"closeDialog\"\r\n      >\r\n        <v-card>\r\n          <v-card-title class=\"primary accent--text font-weight-bold\"\r\n            >Remove User</v-card-title\r\n          >\r\n          <v-card-text class=\"py-6\">\r\n            <div class=\"pr-12 text-h6\">Are you sure to remove?</div>\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n              color=\"black\"\r\n              class=\"text-capitalize\"\r\n              text\r\n              plain\r\n              @click=\"closeDialog\"\r\n              >cancel</v-btn\r\n            >\r\n            <v-btn color=\"error\" class=\"text-capitalize\" :loading=\"deleteLoading\" @click=\"handleDeleteSubmit()\">Remove</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment';\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  mounted() {\r\n    this.$store.dispatch(\"user/checkProfile\", this.$route.params.id);\r\n    this.$store.dispatch(\r\n      \"closeContact/getContacts\",\r\n      this.$route.params.patientId\r\n    );\r\n  },\r\n  filters:{\r\n    dateFormat(val){\r\n      return moment(val).format('MMM. DD, YYYY').toString()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      user: (state) => state.user.checkProfile.data,\r\n      contacts: (state) => state.closeContact.all.data,\r\n      durationDialog: (state) => state.closeContact.update.dialog,\r\n      deleteDialog: (state) => state.closeContact.delete.dialog,\r\n      deleteLoading: state => state.closeContact.delete.loading,\r\n      updateLoading: state => state.closeContact.update.loading\r\n    }),\r\n  },\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      duration: \"\",\r\n      deleteId:'',\r\n      updateId:''\r\n    };\r\n  },\r\n  methods: {\r\n    changeBtn() {\r\n      this.$router.go(-1);\r\n    },\r\n    handleDuration(data) {\r\n      console.log(data);\r\n      this.duration = data.days_left;\r\n      this.updateId = data.id\r\n      this.$store.state.closeContact.update.dialog = true;\r\n    },\r\n    handleDelete(data) {\r\n      console.log('handle', data.id);\r\n      this.deleteId = data.id\r\n      this.$store.state.closeContact.delete.dialog = true;\r\n    },\r\n    closeDialog() {\r\n      this.$store.state.closeContact.update.dialog = false;\r\n      this.$store.state.closeContact.delete.dialog = false;\r\n    },\r\n    handleDurationSubmit() {\r\n      this.$store.dispatch('closeContact/updateTaggedDuration',{id:this.updateId,duration:this.duration,paramId:this.$route.params.patientId})\r\n    },\r\n    handleDeleteSubmit() {\r\n      this.$store.dispatch('closeContact/deleteTagged',{deleteId:this.deleteId,paramId:this.$route.params.patientId})\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}